<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Minerva School ‚Äî Where curiosity finds its community</title>

  <!-- Logo preload + CSS -->
  <link rel="preload" href="assets/logo.png" as="image">
  <link rel="stylesheet" href="css/styles.css" />

  <!-- Leaflet (Map) ‚Äì no API key needed -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <script defer src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- App scripts (order matters) -->
  <script defer src="js/data.js"></script>
  <script defer src="js/app.js"></script>
  <script defer src="js/chatbot.js"></script>
</head>
<body>
  <header>
    <nav class="nav" aria-label="Primary navigation">
      <a class="brand" href="#join" data-link aria-label="Minerva home">
        <img class="logo" src="assets/logo.png" alt="Minerva School logo" />
        <div class="brand-text">
          <strong>Minerva School</strong>
          <small>Where curiosity finds its community</small>
        </div>
        <span class="tag">Prototype</span>
      </a>

      <!-- Correct nav links -->
      <a href="#join" data-link id="navJoin">Join</a>
      <a href="#login" data-link id="navLogin">Log in</a>
      <a href="#lessons" data-link id="navLessons">Lessons</a>
      <a href="#peers" data-link id="navPeers">Peers</a>
      <a href="#projects" data-link id="navProjects">Projects</a>
      <a href="#dashboard" data-link id="navDashboard">Dashboard</a>

      <span class="spacer"></span>
      <button id="chatbotBtn" class="btn ghost" title="Wellness check">Wellness</button>
      <button id="resetBtn" class="btn ghost" title="Clear local data (for testing)">Reset</button>
      <button id="logoutBtn" class="btn ghost hidden">Log out</button>
    </nav>
  </header>

  <main>
    <!-- JOIN -->
    <section id="join" class="abstract-bg" data-route>
      <div class="row">
        <div class="card">
          <h1>Join Minerva</h1>
          <p class="muted">Where curiosity finds its community.</p>
          <form id="joinForm" autocomplete="on" novalidate>
            <div class="fields two">
              <div>
                <label for="firstName">First name</label>
                <input id="firstName" name="firstName" required placeholder="e.g., Asha" />
              </div>
              <div>
                <label for="lastName">Last name</label>
                <input id="lastName" name="lastName" required placeholder="e.g., Kumar" />
              </div>
            </div>

            <div class="fields">
              <div>
                <label for="role">Role</label>
                <select id="role" name="role" required>
                  <option>Learner</option>
                  <option>Teacher</option>
                  <option>Mentor</option>
                  <option>Parent</option>
                  <option>Admin</option>
                </select>
              </div>

              <div>
                <label for="email">Email</label>
                <input type="email" id="email" name="email" required placeholder="name@example.com" />
              </div>

              <div>
                <label for="pw">Password</label>
                <input type="password" id="pw" name="pw" minlength="6" required placeholder="Minimum 6 characters" />
              </div>

              <!-- Mood check (required) -->
              <div>
                <label>Mood right now</label>
                <div id="moodPicker" class="chip-row">
                  <label class="pill"><input type="radio" name="mood" value="1" required> üòû</label>
                  <label class="pill"><input type="radio" name="mood" value="2"> üôÅ</label>
                  <label class="pill"><input type="radio" name="mood" value="3"> üòê</label>
                  <label class="pill"><input type="radio" name="mood" value="4"> üôÇ</label>
                  <label class="pill"><input type="radio" name="mood" value="5"> üòÑ</label>
                </div>
              </div>
            </div>

            <div class="actions">
              <button class="btn primary" type="submit">Create account</button>
              <a class="btn" href="#login" data-link>Already have an account? Log in</a>
            </div>
          </form>
        </div>

        <aside class="card">
          <h2>Why Minerva</h2>
          <ul>
            <li>Personalized pathways across K‚Äë12</li>
            <li>Mentor and peer support with guardrails</li>
            <li>Project‚Äëbased, purpose‚Äëdriven learning</li>
          </ul>
          <div class="chips">
            <span class="pill">Safe‚Äëby‚Äëdesign</span>
            <span class="pill">Evidence‚Äëinformed</span>
            <span class="pill">Community</span>
          </div>
        </aside>
      </div>
    </section>

    <!-- LOGIN -->
    <section id="login" class="abstract-bg hidden" data-route>
      <div class="row">
        <div class="card narrow">
          <h1>Welcome back</h1>
          <p class="muted">Sign in to continue to your dashboard.</p>
          <form id="loginForm">
            <label for="loginEmail">Email</label>
            <input id="loginEmail" type="email" required placeholder="name@example.com" />
            <label for="loginPw">Password</label>
            <input id="loginPw" type="password" required />
            <div class="between">
              <label class="inline"><input type="checkbox" id="showPw" /> Show password</label>
              <button type="button" class="btn ghost" id="forgotBtn">Forgot password?</button>
            </div>
            <div class="actions">
              <button class="btn primary" type="submit">Log in</button>
              <a class="btn" href="#join" data-link>Create account</a>
            </div>
          </form>
        </div>
        <div class="card">
          <h2>New to Minerva?</h2>
          <p>Build your learning passport and join purpose‚Äëdriven projects.</p>
          <a class="btn" href="#join" data-link>Get started</a>
        </div>
      </div>
    </section>

    <!-- LESSONS -->
    <section id="lessons" class="abstract-bg hidden" data-route>
      <div class="card">
        <h1>Lessons</h1>
        <div class="fields two gutter">
          <div>
            <label for="gradeSelect">Grade</label>
            <select id="gradeSelect"></select>
          </div>
          <div>
            <label>Subjects</label>
            <div class="chip-row" id="subjectFilters">
              <!-- Static subjects to match app.js .subFilter -->
              <label class="pill"><input type="checkbox" class="subFilter" value="Math" checked> Math</label>
              <label class="pill"><input type="checkbox" class="subFilter" value="Science" checked> Science</label>
              <label class="pill"><input type="checkbox" class="subFilter" value="English" checked> English</label>
              <label class="pill"><input type="checkbox" class="subFilter" value="Social Studies" checked> Social Studies</label>
              <label class="pill"><input type="checkbox" class="subFilter" value="Computer Science" checked> Computer Science</label>
              <label class="pill"><input type="checkbox" class="subFilter" value="Arts" checked> Arts</label>
              <label class="pill"><input type="checkbox" class="subFilter" value="PE" checked> PE</label>
              <label class="pill"><input type="checkbox" class="subFilter" value="Life Skills" checked> Life Skills</label>
            </div>
          </div>
        </div>

        <!-- Skills (auto-populated by app.js) -->
        <div class="fields">
          <div>
            <label>Skills</label>
            <div id="skillFilters" class="chip-row"></div>
          </div>
        </div>

        <div class="card table-wrap">
          <table class="table" aria-describedby="lessonsHelp">
            <thead>
              <tr>
                <th>Lesson</th><th>Subject</th><th>Mode</th><th>Grade band</th><th>Action</th>
              </tr>
            </thead>
            <tbody id="lessonsBody"></tbody>
          </table>
        </div>
        <small id="lessonsHelp" class="muted">Tip: filter by Grade, Subjects, and Skills. Click <span class="kbd">Open</span> to preview.</small>
      </div>
    </section>

    <!-- PEERS -->
    <section id="peers" class="abstract-bg hidden" data-route>
      <div class="card">
        <h1>Peers</h1>
        <p class="muted">Find classmates and mentors for collaborative learning.</p>

        <div class="fields two">
          <div>
            <label>Interests</label>
            <div class="chip-row" id="interestFilters">
              <!-- Interests to match app.js .interest -->
              <label class="pill"><input type="checkbox" class="interest" value="Robotics"> Robotics</label>
              <label class="pill"><input type="checkbox" class="interest" value="Art"> Art</label>
              <label class="pill"><input type="checkbox" class="interest" value="Media"> Media</label>
              <label class="pill"><input type="checkbox" class="interest" value="Civic"> Civic</label>
              <label class="pill"><input type="checkbox" class="interest" value="Health"> Health</label>
              <label class="pill"><input type="checkbox" class="interest" value="CS"> CS</label>
              <label class="pill"><input type="checkbox" class="interest" value="Entrepreneurship"> Entrepreneurship</label>
              <label class="pill"><input type="checkbox" class="interest" value="Environment"> Environmenter">Role</label>
            <select id="roleFilter">
              <option value="All">All</option>
              <option>Learner</option>
              <option>Teacher</option>
              <option>Mentor</option>
            </select>
          </div>
        </div>

        <!-- World map -->
        <div class="card" style="margin-top:12px">
          <h3>Map</h3>
          <div id="peerMap"></div>
        </div>

        <!-- Chat -->
        <div class="chat" style="margin-top:12px">
          <div class="list" id="peerList"></div>
          <div class="panel">
            <div class="messages" id="chatMessages" aria-live="polite"></div>
            <div class="composer">
              <input id="chatInput" placeholder="Write a message to your peer‚Ä¶" />
              <button class="btn primary" id="sendMsg">Send</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- PROJECTS -->
    <section id="projects" class="abstract-bg hidden" data-route>
      <div class="card">
        <h1>Projects</h1>
        <p class="muted">Showcase of purpose‚Äëdriven projects (curated + community).</p>

        <div class="fields two">
          <div>
            <label for="projSubject">Subject</label>
            <select id="projSubject">
              <option value="All">All</option>
              <option>STEM</option>
              <option>Arts &amp; Design</option>
              <option>Civic &amp; Service</option>
              <option>Entrepreneurship</option>
              <option>Health &amp; Wellness</option>
              <option>Environment</option>
              <option>Media &amp; Communication</option>
              <option>Technology &amp; Computing</option>
            </select>
          </div>
          <div>
            <label for="projGrade">Grade band</label>
            <select id="projGrade">
              <option value="All">All</option>
              <option value="K-2">K‚Äì2</option>
              <option value="3-5">3‚Äì5</option>
              <option value="6-8">6‚Äì8</option>
              <option value="9-12">9‚Äì12</option>
            </select>
          </div>
        </div>

        <div class="grid" id="projectGrid" style="margin-top:12px"></div>

        <!-- Suggestions -->
        <div class="card" style="margin-top:12px">
          <h2>Suggestions ‚Äî Competitions & Internships</h2>
          <p class="muted" style="margin-top:-6px">Filtered by your subject & grade band.</p>
          <ul id="suggestionsList" style="margin-top:6px"></ul>
        </div>
      </div>
    </section>

    <!-- DASHBOARD -->
    <section id="dashboard" class="abstract-bg hidden" data-route>
      <div class="row">
        <div class="card">
          <h1>Dashboard</h1>
          <p class="muted">Progress, reflections, and mentor feedback</p>
          <div class="fields two">
            <div>
              <h3>Learning progress</h3>
              <div class="stack" id="progressList"></div>
            </div>
            <div>
              <h3>Upcoming</h3>
              <ul id="upcomingList"></ul>
              <div style="margin-top:10px">
                <button class="btn" id="moodTodayBtn">Log mood today</button>
              </div>
            </div>
          </div>
        </div>

        <div class="card">
          <h2>Reflections</h2>
          <div id="reflections"></div>
          <div class="fields">
            <textarea id="reflectInput" rows="3" placeholder="What did you learn today? What will you try next time?"></textarea>
            <div class="right">
              <button class="btn" id="clearReflections">Clear</button>
              <button class="btn primary" id="addReflection">Add entry</button>
            </div>
          </div>
        </div>

        <div class="card">
          <h2>Mentor feedback</h2>
          <div id="feedback"></div>
        </div>
      </div>
    </section>
  </main>

  <div class="footer">¬© 2026 Minerva School ¬∑ Prototype for research &amp; co‚Äëdesign.</div>
  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <!-- Modal -->
  <dialog id="modal" class="modal">
    <div class="card plain">
      <div class="between">
        <h3 id="modalTitle">Preview</h3>
        <form method="dialog"><button class="btn">Close</button></form>
      </div>
      <div id="modalBody"></div>
      <div class="right" id="modalActions"></div>
    </div>
  </dialog>
</body>
</html>
