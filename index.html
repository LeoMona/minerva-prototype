<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Minerva School â€” Where curiosity finds its community</title>
  <meta name="theme-color" content="#7B3FE4" />
  <link rel="stylesheet" href="style.css" />
  <!-- Defer ensures DOM exists when app.js runs -->
  <script src="app.js" defer></script>
</head>
<body>
  <header>
    <nav class="nav" aria-label="Primary">
      <!-- BRAND -->
      <div class="brand">
        <!-- Put logo.png next to index.html -->
        <img src="logo.png" alt="The Minerva School logo" class="logo" onerror="this.classList.add('hidden');document.querySelector('.logo-fallback').classList.remove('hidden')">
        <div class="logo-fallback hidden" aria-hidden="true"></div>

        <div class="title">
          <div class="name">Minerva School</div>
          <div class="tagline">Where curiosity finds its community</div>
        </div>
        <span class="tag">Prototype</span>
      </div>

      <!-- Mobile hamburger -->
      <button class="btn ghost nav-toggle" aria-expanded="false" aria-controls="navMenu" aria-label="Toggle menu">â˜°</button>

      <!-- Proper, working links -->
      <div id="navMenu" class="nav-menu">
        <a href="#join" data-link>Join</a>
        <a href="#login" data-link>Log in</a>
        <a href="#lessons" data-link>Lessons</a>
        <a href="#peers" data-link>Peers</a>
        <a href="#projects" data-link>Projects</a>
        <a href="#dashboard" data-link>Dashboard</a>
        <button id="logoutBtn" class="btn ghost hidden">Log out</button>
        <button class="btn switch" id="themeBtn" title="Toggle theme">Theme</button>
      </div>
    </nav>
  </header>

  <main>
    <!-- JOIN -->
    <section id="join" class="abstract-bg" data-route>
      <div class="row">
        <div class="card">
          <h1>Join Minerva</h1>
          <p class="muted">Where curiosity finds its community.</p>
          <form id="joinForm" autocomplete="on">
            <div class="fields two">
              <div>
                <label for="firstName">First name</label>
                <input id="firstName" name="firstName" required placeholder="e.g., Asha" />
              </div>
              <div>
                <label for="lastName">Last name</label>
                <input id="lastName" name="lastName" required placeholder="e.g., Kumar" />
              </div>
            </div>
            <div class="fields">
              <div>
                <label for="role">Role</label>
                <select id="role" name="role" required>
                  <option> Learner </option>
                  <option> Teacher </option>
                  <option> Mentor </ </option>
                  <option> Parent </option>
                  <option> Admin </option>
                </select>
              </div>
              <div>
                <label for="email">Email</label>
                <input type="email" id="email" name="email" required placeholder="name@example.com" />
              </div>
              <div>
                <label for="pw">Password</label>
                <input type="password" id="pw" name="pw" minlength="6" required placeholder="Minimum 6 characters" />
              </div>
            </div>
            <div class="actions">
              <button class="btn primary" type="submit">Create account</button>
              <a class="btn" href="#login" data-link>Already have an account? Log in</a>
            </div>
          </form>
        </div>

        <aside class="card">
          <h2>Why Minerva</h2>
          <ul>
            <li>Personalized pathways across Kâ€‘12</li>
            <li>Mentor and peer support with guardrails</li>
            <li>Projectâ€‘based, purposeâ€‘driven learning</li>
          </ul>
          <div class="chips">
            <span class="pill">Safeâ€‘byâ€‘design</span>
            <span class="pill">Evidenceâ€‘informed</span>
            <span class="pill">Community</span>
          </div>
        </aside>
      </div>
    </section>

    <!-- LOGIN -->
    <section id="login" class="abstract-bg hidden" data-route>
      <div class="row">
        <div class="card">
          <h1>Welcome back</h1>
          <p class="muted">Sign in to continue to your dashboard.</p>
          <form id="loginForm">
            <label for="loginEmail">Email</label>
            <input id="loginEmail" type="email" required placeholder="name@example.com" />
            <label for="loginPw">Password</label>
            <input id="loginPw" type="password" required />
            <div class="inline space-between">
              <label class="inline"><input type="checkbox" id="showPw"/> Show password</label>
              <button type="button" class="btn ghost" id="forgotBtn">Forgot password?</button>
            </div>
            <div class="actions">
              <button class="btn primary" type="submit">Log in</button>
              <a class="btn" href="#join" data-link>Create account</a>
            </div>
          </form>
        </div>

        <div class="card">
          <h2>New to Minerva?</h2>
          <p>Build your learning passport and join purposeâ€‘driven projects.</p>
          <a class="btn" href="#join" data-link>Get started</a>
        </div>
      </div>
    </section>

    <!-- LESSONS -->
    <section id="lessons" class="abstract-bg hidden" data-route>
      <div class="card">
        <h1>Lessons</h1>
        <div class="fields two">
          <div>
            <label for="gradeSelect">Grade</label>
            <select id="gradeSelect"></select>
          </div>
          <div>
            <label>Subjects</label>
            <div class="chip-row">
              <label class="pill"><input type="checkbox" class="subFilter" value="Math" checked> Math</label>
              <label class="pill"><input type="checkbox" class="subFilter" value="Science" checked> Science</label>
              <label class="pill"><input type="checkbox" class="subFilter" value="English" checked> English</label>
              <label class="pill"><input type="checkbox" class="subFilter" value="Social Studies" checked> Social Studies</label>
              <label class="pill"><input type="checkbox" class="subFilter" value="Computer Science" checked> Computer Science</label>
              <label class="pill"><input type="checkbox" class="subFilter" value="Arts" checked> Arts</label>
              <label class="pill"><input type="checkbox" class="subFilter" value="PE" checked> PE</label>
              <label class="pill"><input type="checkbox" class="subFilter" value="Life Skills" checked> Life Skills</label>
            </div>
          </div>
        </div>

        <div class="card pad0">
          <div class="table-wrap">
            <table class="table" aria-describedby="lessonsHelp">
              <thead><tr>
                <th>Lesson</th><th>Subject</th><th>Mode</th><th>Grade band</th><th>Action</th>
              </tr></thead>
              <tbody id="lessonsBody"></tbody>
            </table>
          </div>
        </div>
        <small id="lessonsHelp" class="muted">Tip: filter by Grade and Subjects. Click <span class="kbd">Open</span> to preview.</small>
      </div>
    </section>

    <!-- PEERS -->
    <section id="peers" class="abstract-bg hidden" data-route>
      <div class="card">
        <h1>Peers</h1>
        <p class="muted">Find classmates and mentors for collaborative learning.</p>
        <div class="fields two">
          <div>
            <label>Interests</label>
            <div class="chip-row">
              <label class="pill"><input type="checkbox" class="interest" value="Climate"> Climate</label>
              <label class="pill"><input type="checkbox" class="interest" value="Robotics"> Robotics</label>
              <label class="pill"><input type="checkbox" class="interest" value="Art"> Art</label>
              <label class="pill"><input type="checkbox" class="interest" value="Debate"> Debate</label>
              <label class="pill"><input type="checkbox" class="interest" value="Sports"> Sports</label>
            </div>
          </div>
          <div>
            <label for="roleFilter">Role</label>
            <select id="roleFilter"><option value="All">All</option><option>Learner</option><option>Teacher</option><option>Mentor</option></select>
          </div>
        </div>

        <div class="chat">
          <div class="list" id="peerList"></div>
          <div class="panel">
            <div class="messages" id="chatMessages" aria-live="polite"></div>
            <div class="composer">
              <input id="chatInput" placeholder="Write a message to your peerâ€¦"/>
              <button class="btn primary" id="sendMsg">Send</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- PROJECTS -->
    <section id="projects" class="abstract-bg hidden" data-route>
      <div class="card">
        <h1>Projects</h1>
        <p class="muted">Showcase of purposeâ€‘driven projects (curated + community).</p>
        <div class="fields two">
          <div>
            <label for="projTheme">Theme</label>
            <select id="projTheme">
              <option value="All">All</option>
              <option value="STEM">STEM</option>
              <option value="Arts & Culture">Arts & Culture</option>
              <option value="Media & Communication">Media & Communication</option>
              <option value="Community & Service">Community & Service</option>
              <option value="Entrepreneurship">Entrepreneurship</option>
              <option value="Wellbeing">Wellbeing</option>
            </select>
          </div>
          <div>
            <label for="projGrade">Grade band</label>
            <select id="projGrade">
              <option value="All">All</option>
              <option value="K-2">Kâ€“2</option>
              <option value="3-5">3â€“5</option>
              <option value="6-8">6â€“8</option>
              <option value="9-12">9â€“12</option>
            </select>
          </div>
        </div>
        <div class="grid" id="projectGrid"></div>
      </div>
    </section>

    <!-- DASHBOARD -->
    <section id="dashboard" class="abstract-bg hidden" data-route>
      <div class="row">
        <div class="card">
          <h1>Dashboard</h1>
          <p class="muted">Progress, reflections, and mentor feedback</p>
          <div class="fields two">
            <div>
              <h3>Learning progress</h3>
              <div id="progressList" class="stack"></div>
            </div>
            <div>
              <h3>Upcoming</h3>
              <ul id="upcomingList"></ul>
            </div>
          </div>
        </div>

        <div class="card">
          <h2>Reflections</h2>
          <div id="reflections"></div>
          <div class="fields">
            <textarea id="reflectInput" rows="3" placeholder="What did you learn today? What will you try next time?"></textarea>
            <div class="inline end">
              <button class="btn" id="clearReflections">Clear</button>
              <button class="btn primary" id="addReflection">Add entry</button>
            </div>
          </div>
        </div>

        <div class="card">
          <h2>Mentor feedback</h2>
          <div id="feedback"></div>
        </div>
      </div>
    </section>
  </main>

  <div class="footer">Â© 2026 Minerva School Â· Prototype for research &amp; coâ€‘design.</div>
  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <!-- Preview Modal (reused for lessons/projects) -->
  <dialog id="modal">
    <div class="card no-border">
      <div class="modal-head">
        <h3 id="modalTitle">Preview</h3>
        <form method="dialog"><button class="btn">Close</button></form>
      </div>
      <div id="modalBody"></div>
      <div class="modal-actions" id="modalActions"></div>
    </div>
  </dialog>

  <!-- Mood Board (opens after login if not set today) -->
  <dialog id="moodModal">
    <div class="card no-border">
      <div class="modal-head">
        <h3>How do you feel today?</h3>
        <form method="dialog"><button class="btn">Close</button></form>
      </div>
      <div class="mood-grid" id="moodChoices">
        <!-- Filled by JS -->
      </div>
      <h3 style="margin-top:12px">How do you want to learn today?</h3>
      <div class="chip-row" id="modeChoices">
        <!-- Filled by JS -->
      </div>
      <div class="modal-actions">
        <button class="btn" id="skipMood">Skip</button>
        <button class="btn primary" id="saveMood">Save & Start</button>
      </div>
    </div>
  </dialog>

  <!-- Floating AI helper -->
  <button id="helpFab" class="fab" aria-label="Open Ask Minerva">ðŸ’¬</button>
  <div id="assistant" class="assistant hidden" aria-live="polite">
    <div class="assistant-head">
      <strong>Ask Minerva</strong>
      <button id="assistantClose" class="btn ghost" aria-label="Close">âœ•</button>
    </div>
    <div class="assistant-messages" id="assistantMessages"></div>
    <div class="assistant-composer">
      <input id="assistantInput" placeholder="Ask for help â€” e.g., 'start a math lesson'"/>
      <button id="assistantSend" class="btn primary">Send</button>
    </div>
  </div>
</body>
</html>
